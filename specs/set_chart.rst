.. _set_chart:

set_chart
=======================================
扩展进程 -> 主进程，订阅图表数据（K线或Tick线数据）

Example
--------------------------------------------------
.. code-block:: javascript

  {
    "aid": "set_chart",         // 必填, 请求图表数据
    "chart_id": "abcd123",      // 必填, 图表id, 服务器只会维护每个id收到的最后一个请求的数据
    "ins_list": "SHFE.cu1701",  // 必填, 填空表示删除该图表，多个合约以逗号分割，第一个合约是主合约，所有id都是以主合约为准
    "duration": 180000000000,   // 必填, 周期，单位ns, tick:0, 日线: 3600 * 24 * 1000 * 1000 * 1000
    "view_width": 500,          // 必填, 图表宽度, 请求最新N个数据，并保持滚动(新K线生成会移动图表)
  }

    
Remarks
--------------------------------------------------
由扩展进程发往主进程，用于订阅K线或Tick线数据

chart_id 为一个任意字符串，当多次发送的set_chart包中的chart_id重复时，后一次的请求将覆盖前一次。chart_id不相同则视为不同的订阅

注意：天勤的历史数据服务是推送式的，只要发送过一次 set_chart 请求，每当行情变化时，都会通过 :ref:`rtn_data` 包推送新的K线。扩展进程只需接收保存即可，不需要再自行更新K线